<html>
    <head>
        <script type="text/javascript">

            function getAPIURI(){
                var currentPort = (window.location.port == '' || window.location.port == 0) ? '' : ':' + window.location.port;
                var currentProtocol = window.location.protocol;
                var currentHost = window.location.hostname;
                var URI = currentProtocol + '//' + currentHost + currentPort + '/services/v1.0/';
                return URI;
            }            

            function doAuth(){
                let email = document.getElementById("email").value;
                let password = document.getElementById("password").value;
                let User = {
                    Email : email,
                    Password : password
                }
                console.log(User);
                let request_url = this.getAPIURI() + 'users/login';
                let request_params = {
                    headers: {
                        "Content-Type": "application/json",
                    },
                    method : "POST",
                    body : JSON.stringify(User)
                }
                fetch(request_url, request_params)
                .then(async (response) => {
                    var result = await response.json();
                    console.log('doAuth().result', result);
                })
                .catch(async (error) => {
                    alert('doAuth().error = ' + JSON.stringify(error));
                }) 
            }

            function doTest(){
                let request_url = this.getAPIURI() + 'courses/assigned';
                let request_params = {
                    method : "GET"
                }
                fetch(request_url, request_params)
                .then(async (response) => {
                    var result = await response.json();
                    console.log('doTest().result', result);
                    document.getElementById("answer").innerHTML = JSON.stringify(result);
                })
                .catch(async (error) => {
                    alert('doTest().error = ' + JSON.stringify(error));
                })
            }
        </script>
    </head>
    <body>
        <div>Hello world!</div>
        <div>Please try to authenticate below:</div>
        <div>
            <table>
                <tr><td>E-mail: <input type="text" id="email"/></td></tr>
                <tr><td>Password: <input type="text" id="password"/></td></tr>
                <tr><td><button type="button" onclick="doAuth()">Submit</button></td></tr>
            </table>
        </div>
        <br/>
        <div>
            <button type="button" onclick="doTest()">Try request</button>
        </div>
        <br/>
        <div id="answer">

        </div>

    </body>
</html>